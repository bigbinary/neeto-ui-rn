var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:true});exports.SegmentedTopBar=void 0;var _slicedToArray2=_interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));var _react=_interopRequireWildcard(require("react"));var _reactNative=require("react-native");var _propTypes=_interopRequireDefault(require("prop-types"));var _reactNativeSizeMatters=require("react-native-size-matters");var _theme=require("../../theme");var _Indicator=require("./Indicator");var _Tab=require("./Tab");var _this=this,_jsxFileName="/Users/mohitharshan/Desktop/neeto-ui-rn/src/components/SegmentedTopBar/index.jsx";function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!=="function")return null;var cacheBabelInterop=new WeakMap();var cacheNodeInterop=new WeakMap();return(_getRequireWildcardCache=function _getRequireWildcardCache(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop;})(nodeInterop);}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule){return obj;}if(obj===null||typeof obj!=="object"&&typeof obj!=="function"){return{default:obj};}var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj)){return cache.get(obj);}var newObj={};var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj){if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;if(desc&&(desc.get||desc.set)){Object.defineProperty(newObj,key,desc);}else{newObj[key]=obj[key];}}}newObj.default=obj;if(cache){cache.set(obj,newObj);}return newObj;}var SegmentedTopBar=function SegmentedTopBar(_ref){var _ref$state=_ref.state,routes=_ref$state.routes,index=_ref$state.index,navigation=_ref.navigation,height=_ref.height,descriptors=_ref.descriptors;var containerRef=(0,_react.useRef)();var _useState=(0,_react.useState)([]),_useState2=(0,_slicedToArray2.default)(_useState,2),measures=_useState2[0],setMeasures=_useState2[1];var tabsData=(0,_react.useMemo)(function(){return routes.map(function(_ref2){var _ref3,_options$tabBarLabel;var key=_ref2.key,name=_ref2.name;var options=descriptors[key].options;var label=(_ref3=(_options$tabBarLabel=options.tabBarLabel)!=null?_options$tabBarLabel:options.title)!=null?_ref3:name;return{label:label,value:name,ref:(0,_react.createRef)()};});},[]);(0,_react.useLayoutEffect)(function(){var _measures=[];tabsData.forEach(function(_ref4){var ref=_ref4.ref;ref.current.measureLayout(containerRef.current,function(x,y,width,height){_measures.push({x:x,y:y,width:width,height:height});if(_measures.length===tabsData.length){setMeasures(_measures);}});});},[measures.length]);return _react.default.createElement(_reactNative.View,{height:height,ref:containerRef,style:styles.container,__self:_this,__source:{fileName:_jsxFileName,lineNumber:94,columnNumber:5}},measures.length>0&&_react.default.createElement(_Indicator.Indicator,{measure:measures[index],__self:_this,__source:{fileName:_jsxFileName,lineNumber:95,columnNumber:31}}),tabsData.map(function(_ref5){var label=_ref5.label,value=_ref5.value,ref=_ref5.ref;return _react.default.createElement(_Tab.Tab,{flex:tabsData.length>3?label.length:1,key:value,label:label,navigation:navigation,ref:ref,value:value,__self:_this,__source:{fileName:_jsxFileName,lineNumber:97,columnNumber:9}});}));};exports.SegmentedTopBar=SegmentedTopBar;var styles=_reactNative.StyleSheet.create({container:{flexDirection:"row",borderRadius:(0,_reactNativeSizeMatters.moderateScale)(6),backgroundColor:_theme.theme.colors.background.secondary}});SegmentedTopBar.propTypes={state:_propTypes.default.object,height:_propTypes.default.number,navigation:_propTypes.default.object,descriptors:_propTypes.default.object};SegmentedTopBar.defaultProps={tabs:[],height:(0,_reactNativeSizeMatters.moderateScale)(36)};